services:
  fq-connector-go:
    container_name: fq-tests-pg-fq-connector-go
    image: ghcr.io/ydb-platform/fq-connector-go:v0.4.14@sha256:c985252fc8bb455f9769532dbe94dafd81527b3cce2599b209825a6034ca4a95
    ports:
      - 2130
    volumes:
      - ../../fq-connector-go/:/opt/ydb/cfg/
  mysql:
    # mysql:8.0-debian at the state of 25/05/2024
    # Tests sometimes flap with mysql:8.4, so we use mysql:8.0 which
    # is max supported version in Yandex Cloud
    image: mirror.gcr.io/library/mysql@sha256:1579fe3a97a436cc10824fc771a07fcedc92213e7ab7604eb5d2976ca419abc8
    container_name: ${USER}-fq-connector-go-tests-mysql
    ports:
      - 3306
    environment:
      MYSQL_DATABASE: db
      MYSQL_ROOT_PASSWORD: password
    volumes:
      - ./init:/docker-entrypoint-initdb.d
      - ./custom.cnf:/etc/mysql/conf.d/custom.cnf
version: "3.4"
