# Aрхитектура федеративных запросов

Некоторые источники данных, такие как [S3 ({{objstorage-full-name}})](s3), поддерживаются {{ ydb-full-name }} нативно, тогда как для работы с другими (например, реляционными СУБД) потребуется применение _коннекторов_ - специальных микросервисов, реализующих унифицированный интерфейс доступа к внешним источникам данных. 

## Коннекторы {#connectors}

В функции коннекторов входят:

* Трансляция YQL-запросов в запросы на языке, специфичном для внешнего источника (например, в запросы на местном диалекте SQL или в обращения к HTTP API).
* Организация сетевых соединений с источниками данных.
* Конвертация данных, извлечённых из внешних источников, в колоночное представление в формате [Arrow IPC Stream](https://arrow.apache.org/docs/python/ipc.html#writing-and-reading-streams), поддерживаемом {{ ydb-short-name }}.

![Архитектура YDB Federated Query](_assets/architecture.png "Архитектура YDB Federated Query" =640x)

Таким образом, благодаря коннекторам формируется слой абстракции, скрывающий от {{ ydb-short-name }} специфику внешних источников данных. Лаконичность интерфейса коннектора позволяет легко расширять перечень поддерживаемых источников, внося минимальные изменения в код {{ ydb-short-name }}.

В настоящее время пользователи могут развернуть [один из готовых коннекторов](../../deploy/federated_query/connector.md) или написать свою реализацию на любом языке программирования по [спецификации](https://github.com/ydb-platform/ydb/tree/main/ydb/library/yql/providers/generic/connector/api) GRPC.

## Перечень поддерживаемых внешних источников данных {#supported-datasources}

| Источник | Поддержка |
| -------- | --------- |
| S3 ({{objstorage-full-name}}) | Нативная |
| ClickHouse | Через коннектор [fq-connector-go](../../deploy/federated_query/connector.md#fq-connector-go) |
| PostgreSQL | Через коннектор [fq-connector-go](../../deploy/federated_query/connector.md#fq-connector-go) |
